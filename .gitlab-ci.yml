image: registry.gitlab.com/vasilinenko/rabbit-cms-module-blog

stages:
    - test

test:
    stage: test
    script:
        - composer i --dev --no-interaction
        - ./vendor/bin/phplint -v --no-interaction
        - ./vendor/bin/phpcs -v
        - ./vendor/bin/phpinsights -v --no-interaction
        - ./vendor/bin/psalm
        - ./vendor/bin/phpstan analyse
        - ./vendor/bin/phpmd src/ ansi phpmd.xml
        - ./vendor/bin/phpmetrics --report-html=var/phpmetrics ./src/
        - ./vendor/bin/phpunit -v --no-interaction
        - ./vendor/bin/infection --threads=4 --show-mutations --only-covered
